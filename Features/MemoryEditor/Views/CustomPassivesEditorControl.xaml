<UserControl x:Class="InazumaElevenVRSaveEditor.Features.MemoryEditor.Views.CustomPassivesEditorControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <materialDesign:Card Grid.Row="0" Style="{StaticResource CardStyle}">
            <StackPanel>
                <Button Command="{Binding MemoryEditor.BackToMenuCommand}"
                      Style="{StaticResource MaterialDesignOutlinedButton}"
                      HorizontalAlignment="Left"
                      Margin="0,0,0,15"
                      Height="35">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="ChevronLeft"
                                               VerticalAlignment="Center"
                                               Margin="0,0,8,0"/>
                        <TextBlock Text="Back to Menu" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <TextBlock Text="Custom Passives"
                         Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                         Margin="0,0,0,15"/>

                <TextBlock Text="Select up to 5 custom passives. Open the Abilearn Board in-game to apply changes."
                         Style="{StaticResource MaterialDesignBody2TextBlock}"
                         Opacity="0.7"
                         TextWrapping="Wrap"
                         Margin="0,0,0,10"/>
            </StackPanel>
        </materialDesign:Card>

        <materialDesign:Card Grid.Row="1" Style="{StaticResource CardStyle}" Margin="10">
            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                <StackPanel Margin="0,0,0,20">
                <Border Background="{DynamicResource MaterialDesignDivider}"
                       CornerRadius="8"
                       Margin="0,0,0,20">
                    <Grid Margin="15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <Image Grid.Column="0"
                               Source="/Resources/Cards/Pasivas.png"
                               Width="32"
                               Height="32"
                               VerticalAlignment="Center"
                               Margin="0,0,15,0"
                               RenderOptions.BitmapScalingMode="HighQuality"/>

                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <TextBlock Text="Current Status"
                                     FontSize="12"
                                     Opacity="0.7"/>
                            <TextBlock Text="{Binding MemoryEditor.StatusMessage}"
                                     FontSize="24"
                                     FontWeight="Bold"
                                     Margin="0,5,0,0"/>
                            <TextBlock Text="Click attach to connect to the game"
                                     FontSize="11"
                                     Opacity="0.6"
                                     Margin="0,5,0,0"
                                     FontStyle="Italic"/>
                        </StackPanel>

                        <Button Grid.Column="2"
                              Command="{Binding MemoryEditor.AttachToProcessCommand}"
                              Style="{StaticResource MaterialDesignRaisedButton}"
                              Height="45"
                              VerticalAlignment="Center"
                              Background="#4CAF50">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Link"
                                                       Width="20"
                                                       Height="20"
                                                       VerticalAlignment="Center"
                                                       Margin="0,0,8,0"/>
                                <TextBlock Text="Attach to Game"
                                         VerticalAlignment="Center"
                                         FontWeight="Medium"/>
                            </StackPanel>
                        </Button>

                        <Button Grid.Column="2"
                              Command="{Binding MemoryEditor.DetachFromProcessCommand}"
                              Style="{StaticResource MaterialDesignRaisedButton}"
                              Height="45"
                              VerticalAlignment="Center"
                              Background="#D32F2F"
                              Visibility="{Binding MemoryEditor.IsAttached, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="LinkOff"
                                                       Width="20"
                                                       Height="20"
                                                       VerticalAlignment="Center"
                                                       Margin="0,0,8,0"/>
                                <TextBlock Text="Detach"
                                         VerticalAlignment="Center"
                                         FontWeight="Medium"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                </Border>

                <!-- Custom Passives Section -->
                <Grid Margin="0,20,0,0">
                    <materialDesign:Card Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="Custom Passive Selection"
                                     Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                                     Margin="0,0,0,15"/>

                            <TextBlock Text="Select up to 5 custom passives from the dropdowns below. These selections will be applied when you open the Abilearn Board in-game."
                                     Style="{StaticResource MaterialDesignBody2TextBlock}"
                                     Opacity="0.7"
                                     TextWrapping="Wrap"
                                     Margin="0,0,0,20"/>

                            <!-- Passive 1 -->
                            <Border Background="{DynamicResource MaterialDesignDivider}"
                                   CornerRadius="8"
                                   Padding="15"
                                   Margin="0,0,0,15">
                                <StackPanel>
                                    <TextBlock Text="Passive Slot 1"
                                             FontSize="14"
                                             FontWeight="SemiBold"
                                             Margin="0,0,0,10"/>
                                    <ComboBox ItemsSource="{Binding MemoryEditor.AllPassiveIds}"
                                            SelectedValue="{Binding MemoryEditor.CustomPassive1, Mode=TwoWay}"
                                            SelectedValuePath="Id"
                                            Style="{StaticResource MaterialDesignOutlinedComboBox}"
                                            materialDesign:HintAssist.Hint="Select Passive 1"
                                            Margin="0,0,0,0">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel>
                                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>
                                                    <TextBlock Text="{Binding Id}" FontSize="10" Opacity="0.7"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                </StackPanel>
                            </Border>

                            <!-- Passive 2 -->
                            <Border Background="{DynamicResource MaterialDesignDivider}"
                                   CornerRadius="8"
                                   Padding="15"
                                   Margin="0,0,0,15">
                                <StackPanel>
                                    <TextBlock Text="Passive Slot 2"
                                             FontSize="14"
                                             FontWeight="SemiBold"
                                             Margin="0,0,0,10"/>
                                    <ComboBox ItemsSource="{Binding MemoryEditor.AllPassiveIds}"
                                            SelectedValue="{Binding MemoryEditor.CustomPassive2, Mode=TwoWay}"
                                            SelectedValuePath="Id"
                                            Style="{StaticResource MaterialDesignOutlinedComboBox}"
                                            materialDesign:HintAssist.Hint="Select Passive 2"
                                            Margin="0,0,0,0">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel>
                                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>
                                                    <TextBlock Text="{Binding Id}" FontSize="10" Opacity="0.7"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                </StackPanel>
                            </Border>

                            <!-- Passive 3 -->
                            <Border Background="{DynamicResource MaterialDesignDivider}"
                                   CornerRadius="8"
                                   Padding="15"
                                   Margin="0,0,0,15">
                                <StackPanel>
                                    <TextBlock Text="Passive Slot 3"
                                             FontSize="14"
                                             FontWeight="SemiBold"
                                             Margin="0,0,0,10"/>
                                    <ComboBox ItemsSource="{Binding MemoryEditor.AllPassiveIds}"
                                            SelectedValue="{Binding MemoryEditor.CustomPassive3, Mode=TwoWay}"
                                            SelectedValuePath="Id"
                                            Style="{StaticResource MaterialDesignOutlinedComboBox}"
                                            materialDesign:HintAssist.Hint="Select Passive 3"
                                            Margin="0,0,0,0">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel>
                                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>
                                                    <TextBlock Text="{Binding Id}" FontSize="10" Opacity="0.7"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                </StackPanel>
                            </Border>

                            <!-- Passive 4 -->
                            <Border Background="{DynamicResource MaterialDesignDivider}"
                                   CornerRadius="8"
                                   Padding="15"
                                   Margin="0,0,0,15">
                                <StackPanel>
                                    <TextBlock Text="Passive Slot 4"
                                             FontSize="14"
                                             FontWeight="SemiBold"
                                             Margin="0,0,0,10"/>
                                    <ComboBox ItemsSource="{Binding MemoryEditor.AllPassiveIds}"
                                            SelectedValue="{Binding MemoryEditor.CustomPassive4, Mode=TwoWay}"
                                            SelectedValuePath="Id"
                                            Style="{StaticResource MaterialDesignOutlinedComboBox}"
                                            materialDesign:HintAssist.Hint="Select Passive 4"
                                            Margin="0,0,0,0">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel>
                                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>
                                                    <TextBlock Text="{Binding Id}" FontSize="10" Opacity="0.7"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                </StackPanel>
                            </Border>

                            <!-- Passive 5 -->
                            <Border Background="{DynamicResource MaterialDesignDivider}"
                                   CornerRadius="8"
                                   Padding="15"
                                   Margin="0,0,0,15">
                                <StackPanel>
                                    <TextBlock Text="Passive Slot 5"
                                             FontSize="14"
                                             FontWeight="SemiBold"
                                             Margin="0,0,0,10"/>
                                    <ComboBox ItemsSource="{Binding MemoryEditor.AllPassiveIds}"
                                            SelectedValue="{Binding MemoryEditor.CustomPassive5, Mode=TwoWay}"
                                            SelectedValuePath="Id"
                                            Style="{StaticResource MaterialDesignOutlinedComboBox}"
                                            materialDesign:HintAssist.Hint="Select Passive 5"
                                            Margin="0,0,0,0">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel>
                                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>
                                                    <TextBlock Text="{Binding Id}" FontSize="10" Opacity="0.7"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                </StackPanel>
                            </Border>

                            <!-- Action Buttons -->
                            <Grid Margin="0,10,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="10"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Apply Button -->
                                <Button Grid.Column="0"
                                      Command="{Binding MemoryEditor.ApplyCustomPassivesCommand}"
                                      Style="{StaticResource MaterialDesignRaisedButton}"
                                      Height="50"
                                      Background="#4CAF50">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="Check"
                                                               Width="24"
                                                               Height="24"
                                                               VerticalAlignment="Center"
                                                               Margin="0,0,10,0"/>
                                        <TextBlock Text="Apply Custom Passives"
                                                 VerticalAlignment="Center"
                                                 FontSize="16"
                                                 FontWeight="Medium"/>
                                    </StackPanel>
                                </Button>

                                <!-- Clear Button -->
                                <Button Grid.Column="2"
                                      Command="{Binding MemoryEditor.ClearCustomPassivesCommand}"
                                      Style="{StaticResource MaterialDesignRaisedButton}"
                                      Height="50"
                                      Background="#FF9800">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="Eraser"
                                                               Width="24"
                                                               Height="24"
                                                               VerticalAlignment="Center"
                                                               Margin="0,0,10,0"/>
                                        <TextBlock Text="Clear All"
                                                 VerticalAlignment="Center"
                                                 FontSize="16"
                                                 FontWeight="Medium"/>
                                    </StackPanel>
                                </Button>
                            </Grid>
                        </StackPanel>
                    </materialDesign:Card>
                </Grid>
            </StackPanel>
            </ScrollViewer>
        </materialDesign:Card>
    </Grid>
</UserControl>
